"use strict";var t=require("../../chunks/playcanvas.js");var e=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)};function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}for(var r=function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{type:"image/jpeg"};n(this,t),this.parts=e,this.options=r,r.type=r.type.replace("jpg","jpeg")},o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=new Uint8Array(256),a=0;a<o.length;a++)i[o.charCodeAt(a)]=a;var c=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e=t.prototype;return e.createObjectURL=function(t){if(n=t,null!=(i=r)&&"undefined"!=typeof Symbol&&i[Symbol.hasInstance]?i[Symbol.hasInstance](n):n instanceof i){var e=function(t){for(var e,n="",r=new Uint8Array(t),i=r.byteLength,a=i%3,c=i-a,u=0;u<c;u+=3)e=r[u]<<16|r[u+1]<<8|r[u+2],n+=o[(16515072&e)>>18]+o[(258048&e)>>12]+o[(4032&e)>>6]+o[63&e];return 1==a?(e=r[c],n+=o[(252&e)>>2]+o[(3&e)<<4]+"=="):2==a&&(e=r[c]<<8|r[c+1],n+=o[(64512&e)>>10]+o[(1008&e)>>4]+o[(15&e)<<2]+"="),n}(t.parts[0]);return"data:".concat(t.options.type,";base64,").concat(e)}var n,i;return""},e.revokeObjectURL=function(){},t}();function u(t){if((t=(t="".concat(t)).replace(/[ \t\n\f\r]/g,"")).length%4==0&&(t=t.replace(/==?$/,"")),t.length%4==1||/[^+/0-9A-Za-z]/.test(t))return"";for(var e,n,r="",o=0,i=0,a=0;a<t.length;a++)o<<=6,o|=(e=t[a],n=void 0,(n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(e))<0?void 0:n),24===(i+=6)&&(r+=String.fromCharCode((16711680&o)>>16),r+=String.fromCharCode((65280&o)>>8),r+=String.fromCharCode(255&o),o=i=0);return 12===i?(o>>=4,r+=String.fromCharCode(o)):18===i&&(o>>=2,r+=String.fromCharCode((65280&o)>>8),r+=String.fromCharCode(255&o)),r}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var f=new WeakMap,l=function t(e){s(this,t),this.identifier=e.identifier,this.force=void 0===e.force?1:e.force,this.pageX=void 0===e.pageX?e.x:e.pageX,this.pageY=void 0===e.pageY?e.y:e.pageY,this.clientX=void 0===e.clientX?e.x:e.clientX,this.clientY=void 0===e.clientY?e.y:e.clientY,this.screenX=this.pageX,this.screenY=this.pageY},p=function(){function t(){s(this,t),f.set(this,{})}var e=t.prototype;return e.addEventListener=function(t,e){var n=f.get(this);n||(n={},f.set(this,n)),n[t]||(n[t]=[]),n[t].push(e)},e.removeEventListener=function(t,e){var n=f.get(this);if(n){var r=n[t];if(r&&r.length>0)for(var o=r.length;o--;o>0)if(r[o]===e){r.splice(o,1);break}}},e.dispatchEvent=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{type:""};"function"!=typeof t.preventDefault&&(t.preventDefault=function(){}),"function"!=typeof t.stopPropagation&&(t.stopPropagation=function(){});var e=f.get(this);if(e){var n=e[t.type];if(n)for(var r=0;r<n.length;r++)n[r](t)}"function"==typeof this["on".concat(t.type)]&&this["on".concat(t.type)].call(this,t)},e.releasePointerCapture=function(){},e.setPointerCapture=function(){},t}();function h(t){var e=t.createImage();return e.addEventListener=function(t,n){return e["on".concat(t)]=n.bind(e)},e.removeEventListener=function(t){return e["on".concat(t)]=null},e}function d(t){var e=function(){if(o(/^<\?xml\s*/)){for(var t={attributes:{},children:[]};!i()&&!a("?>");){var e=n();if(!e)return t;t.attributes[e.name]=e.value}return o(/\?>\s*/),o(/<!DOCTYPE[^>]*>\s/),t}},n=function(){var t=o(/([\w:-]+)\s*=\s*("[^"]*"|'[^']*'|\w+)\s*/);if(t)return{name:t[1],value:r(t[2])}},r=function(t){return t.replace(/^['"]|['"]$/g,"")},o=function(e){var n=t.match(e);if(n)return t=t.slice(n[0].length),n},i=function(){return 0==t.length},a=function(e){return 0==t.indexOf(e)};return t=(t=t.trim()).replace(/<!--[\s\S]*?-->/g,""),{declaration:e(),root:c(),isXML:!0};function c(){var t=o(/^<([\w-:.]+)\s*/);if(t){for(var e,r={name:t[1],attributes:{},children:[]};!(i()||a(">")||a("?>")||a("/>"));){var u=n();if(!u)return r;r.attributes[u.name]=u.value}if(o(/^\s*\/>\s*/))return r;for(o(/\??>\s*/),r.content=function(){var t=o(/^([^<]*)/);return t?t[1]:""}();e=c();)r.children.push(e);return o(/^<\/[\w-:.]+>\s*/),r}}}function y(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function v(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i=[],a=!0,c=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(i.push(r.value),!e||i.length!==e);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==n.return||n.return()}finally{if(c)throw o}}return i}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return y(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return y(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(t,e){e(t),t.children.forEach((function(t){return g(t,e)}))}var m=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return t.prototype.parseFromString=function(t){var e=d(t),n={hasAttribute:function(t){return void 0!==this.attributes[t]},getAttribute:function(t){return this.attributes[t]},getElementsByTagName:function(t){var e=[];return this.childNodes.forEach((function(n){return g(n,(function(n){return t===n.name&&e.push(n)}))})),e}};e.root&&g(e.root,(function(t){t.nodeType=1,t.nodeName=t.name,t.style=new Proxy((t.attributes.style||"").split(";").reduce((function(t,e){if(e){var n=v(e.split(":"),2),r=n[0],o=n[1];t[r.trim()]=o.trim()}return t}),{}),{get:function(t,e){return t[e]||""}}),t.textContent=t.content,t.childNodes=t.children,t.__proto__=n}));var r={documentElement:e.root,childNodes:[e.root]};return r.__proto__=n,r},t}();var b=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return t.prototype.decode=function(t){for(var e,n,r=(e=t,(null!=(n=ArrayBuffer)&&"undefined"!=typeof Symbol&&n[Symbol.hasInstance]?n[Symbol.hasInstance](e):e instanceof n)?new Uint8Array(t):t),o="",i=0,a=r.length;i<a;i++)o+=String.fromCharCode(r[i]);try{return decodeURIComponent(escape(o))}catch(t){return o}},t}(),w={now:function(){return Date.now()}};function O(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function E(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function _(t,e,n){return _=E()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var o=new(Function.bind.apply(t,r));return n&&P(o,n.prototype),o},_.apply(null,arguments)}function C(t){return C=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},C(t)}function x(t,e){return null!=e&&"undefined"!=typeof Symbol&&e[Symbol.hasInstance]?!!e[Symbol.hasInstance](t):t instanceof e}function S(t,e){return!e||"object"!==R(e)&&"function"!=typeof e?O(t):e}function P(t,e){return P=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},P(t,e)}var R=function(t){return t&&"undefined"!=typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};function T(t){var e="function"==typeof Map?new Map:void 0;return T=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return _(t,arguments,C(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),P(r,t)},T(t)}function D(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=C(t);if(e){var o=C(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return S(this,n)}}var j=new WeakMap,A=new WeakMap,M=new WeakMap;function I(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.target=e.target||this,"function"==typeof this["on".concat(t)]&&this["on".concat(t)].call(this,e)}function L(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.readyState=t,e.readyState=t,I.call(this,"readystatechange",e)}function F(t){return!/^(http|https|ftp|wxfile):\/\/.*/i.test(t)}var N=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&P(t,e)}(n,T(p));var e=D(n);function n(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),(t=e.call(this)).runtime=wx.getSystemInfoSync().platform,t.onabort=null,t.onerror=null,t.onload=null,t.onloadstart=null,t.onprogress=null,t.ontimeout=null,t.onloadend=null,t.onreadystatechange=null,t.readyState=0,t.response=null,t.responseText=null,t.responseType="text",t.dataType="string",t.responseXML=null,t.status=0,t.statusText="",t.upload={},t.withCredentials=!1,j.set(O(t),{"content-type":"application/x-www-form-urlencoded"}),A.set(O(t),{}),t}var r=n.prototype;return r.abort=function(){var t=M.get(this);t&&t.abort()},r.getAllResponseHeaders=function(){var t=A.get(this);return Object.keys(t).map((function(e){return"".concat(e,": ").concat(t[e])})).join("\n")},r.getResponseHeader=function(t){return A.get(this)[t]},r.open=function(t,e){this._method=t,this._url=e,L.call(this,n.OPENED)},r.overrideMimeType=function(){},r.send=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=this;if(this.readyState!==n.OPENED)throw new Error("Failed to execute 'send' on 'XMLHttpRequest': The object's state must be OPENED.");var r,o=this._url,i=j.get(this),a=this.responseType,c=this.dataType,u=F(o);"arraybuffer"===a||(r="utf8"),"json"===a&&(c="json",a="text"),delete this.response,this.response=null;var s=!1,f=function(t){var r=t.data,o=t.statusCode,i=t.header;if(!s){if(s=!0,o=void 0===o?200:o,"string"!=typeof r&&!x(r,ArrayBuffer)&&"json"!==c)try{r=JSON.stringify(r)}catch(t){}e.status=o,i&&A.set(e,i),I.call(e,"loadstart"),L.call(e,n.HEADERS_RECEIVED),L.call(e,n.LOADING),e.response=r,x(r,ArrayBuffer)?Object.defineProperty(e,"responseText",{enumerable:!0,configurable:!0,get:function(){throw"InvalidStateError : responseType is "+this.responseType}}):e.responseText=r,L.call(e,n.DONE),I.call(e,"load"),I.call(e,"loadend")}},l=function(t){var n=t.errMsg;s||(s=!0,-1!==n.indexOf("abort")?I.call(e,"abort"):I.call(e,"error",{message:n}),I.call(e,"loadend"),u&&console.warn(n))};if(u){var p=wx.getFileSystemManager(),h={filePath:o,success:f,fail:l};return r&&(h.encoding=r),void p.readFile(h)}var d="arraybuffer"===a&&"ios"===this.runtime&&n.useFetchPatch;wx.request({data:t,url:o,method:this._method.toUpperCase(),header:i,dataType:c,responseType:a,enableCache:!1,success:f,fail:l}),d&&setTimeout((function(){wx.request({data:t,url:o,method:this._method,header:i,dataType:c,responseType:a,enableCache:!0,success:f,fail:l})}),n.fetchPatchDelay)},r.setRequestHeader=function(t,e){var n=j.get(this);n[t]=e,j.set(this,n)},r.addEventListener=function(t,e){var n=this;"function"==typeof e&&(this["on"+t]=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.target=t.target||n,e.call(n,t)})},r.removeEventListener=function(t,e){this["on"+t]===e&&(this["on"+t]=null)},n}();function X(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function B(t){return B=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},B(t)}function U(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),r.forEach((function(e){X(t,e,n[e])}))}return t}function H(t,e){return!e||"object"!==k(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Y(t,e){return Y=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Y(t,e)}N.UNSEND=0,N.OPENED=1,N.HEADERS_RECEIVED=2,N.LOADING=3,N.DONE=4,N.useFetchPatch=!1,N.fetchPatchDelay=200;var k=function(t){return t&&"undefined"!=typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};function W(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=B(t);if(e){var o=B(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return H(this,n)}}function q(){return wx.createOffscreenCanvas()}var G=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Y(t,e)}(n,t);var e=W(n);function n(t,o,i){var a;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),(a=e.call(this)).enabledDeviceMotion=!1,a.canvasRect={width:0,height:0,top:0,left:0,right:0,bottom:0};var s=wx.getSystemInfoSync(),f="android"===s.platform;a.canvas=t,a.canvasW=void 0===o?t.width:o,a.canvasH=void 0===i?t.height:i,a.canvasRect.width=a.canvasW,a.canvasRect.height=a.canvasH;var l={createElementNS:function(e,n){return"canvas"===n?t:"img"===n?h(t):void 0},createElement:function(e){return"canvas"===e?t:"img"===e?h(t):void 0},body:{}},d=h(t),y=function(){return h(t)},v=new c,g={innerWidth:s.windowWidth,innerHeight:s.windowHeight,devicePixelRatio:s.pixelRatio,AudioContext:function(){},requestAnimationFrame:a.canvas.requestAnimationFrame,cancelAnimationFrame:a.canvas.cancelAnimationFrame,DeviceOrientationEvent:{requestPermission:function(){return Promise.resolve("granted")}},URL:v,Image:y,DOMParser:m,TextDecoder:b,Blob:r,performance:w};return[t,l,g,l.body].forEach((function(t){var e=t.__proto__;t.__proto__={},t.__proto__.__proto__=e,function(t,e){var n=!0,r=!1,o=void 0;try{for(var i,a=Object.getOwnPropertyNames(e)[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var c=i.value;if("constructor"!==c&&"prototype"!==c&&"name"!==c){var u=Object.getOwnPropertyDescriptor(e,c);u&&Object.defineProperty(t,c,u)}}}catch(t){r=!0,o=t}finally{try{n||null==a.return||a.return()}finally{if(r)throw o}}}(t.__proto__,p.prototype)})),a.polyfill={window:g,document:l,Blob:r,DOMParser:m,TextDecoder:b,XMLHttpRequest:N,OffscreenCanvas:q,URL:v,Image:y,HTMLImageElement:d.constructor,atob:u,global:g,createImageBitmap:void 0,cancelAnimationFrame:g.cancelAnimationFrame,requestAnimationFrame:g.requestAnimationFrame,performance:g.performance},a.patchCanvas(),a.onDeviceMotionChange=function(t){t.type="deviceorientation",f&&(t.alpha*=-1,t.beta*=-1,t.gamma*=-1),g.dispatchEvent(t)},a}var o=n.prototype;return o.patchCanvas=function(){var t=this,e=this,n=e.canvasH,r=e.canvasW,o=e.canvas;Object.defineProperty(this.canvas,"style",{get:function(){return{width:this.width+"px",height:this.height+"px"}}}),Object.defineProperty(this.canvas,"clientHeight",{get:function(){return n||this.height}}),Object.defineProperty(this.canvas,"clientWidth",{get:function(){return r||this.width}}),o.ownerDocument=this.document,o.getBoundingClientRect=function(){return t.canvasRect},o._getContext=this.canvas.getContext,o.getContext=function(){var t;return"webgl"!==arguments[0]?null:(t=o)._getContext.apply(t,arguments)}},o.patchXHR=function(){return N.useFetchPatch=!0,this},o.enableDeviceOrientation=function(t){var e=this;return new Promise((function(n,r){wx.onDeviceMotionChange(e.onDeviceMotionChange),wx.startDeviceMotionListening({interval:t,success:function(t){n(t),e.enabledDeviceMotion=!0},fail:r})}))},o.disableDeviceOrientation=function(){var t=this;return new Promise((function(e,n){wx.offDeviceMotionChange(t.onDeviceMotionChange),t.enabledDeviceMotion&&wx.stopDeviceMotionListening({success:function(){e(!0),t.enabledDeviceMotion=!1},fail:n})}))},o.dispatchTouchEvent=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{touches:[],changedTouches:[],timeStamp:0,type:""},e=U({},this),n=t.changedTouches.map((function(t){return new l(t)})),r={changedTouches:n,touches:t.touches.map((function(t){return new l(t)})),targetTouches:Array.prototype.slice.call(t.touches.map((function(t){return new l(t)}))),timeStamp:t.timeStamp,target:e,currentTarget:e,type:t.type,cancelBubble:!1,cancelable:!1};if(this.canvas.dispatchEvent(r),n.length){var o=n[0],i={pageX:o.pageX,pageY:o.pageY,offsetX:o.pageX,offsetY:o.pageY,pointerId:o.identifier,type:{touchstart:"pointerdown",touchmove:"pointermove",touchend:"pointerup"}[t.type]||"",pointerType:"touch"};this.canvas.dispatchEvent(i)}},o.dispose=function(){this.disableDeviceOrientation(),this.canvas.width=0,this.canvas.height=0,this.canvas&&(this.canvas.ownerDocument=null),this.onDeviceMotionChange=null,this.canvas=null},n}(e);function V(t){return V=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},V(t)}function $(t,e){return!e||"object"!==J(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function z(t,e){return z=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},z(t,e)}var J=function(t){return t&&"undefined"!=typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};function Q(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=V(t);if(e){var o=V(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return $(this,n)}}var Z=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&z(t,e)}(n,G);var e=Q(n);function n(t,r,o){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),(i=e.call(this,t,r,o)).polyfill.$defaultWebGLExtensions={},i.polyfill.document.createElement=function(e){return"canvas"===e?t:"img"===e?t.createImage():void 0},i.polyfill.document.body=t,i.polyfill.document.head={},t.appendChild=function(){},t.setAttribute=function(){},i}return n}();Page({disposing:!1,platform:null,app:null,onReady(){wx.createSelectorQuery().select("#gl").node().exec((e=>{const n=e[0].node;this.platform=new Z(n),console.log(this.platform),t.PlatformManager.set(this.platform),this.app=function(e){const n=new t.Application(e,{});n.graphicsDevice.maxPixelRatio=t.PlatformManager.polyfill.window.devicePixelRatio,n.setCanvasFillMode(t.FILLMODE_FILL_WINDOW),n.setCanvasResolution(t.RESOLUTION_AUTO),getApp().globalData.app=n;const r=new t.Asset("skybox","cubemap",{url:"https://demo.uality.cn/helipad.dds"},{type:t.TEXTURETYPE_RGBM});r.ready((()=>{n.scene.setSkybox(r.resources)})),n.assets.add(r),n.assets.load(r),n.assets.loadFromUrl("https://emw-pub.uality.cn/vs50mxeb_cck/latest/vs50mxeb_cck.glb","container",(function(t,e){n.start();const r=e.resource.instantiateRenderEntity();n.root.addChild(r)}));const o=new t.Entity("Camera");return o.addComponent("camera"),o.setLocalPosition(0,0,10),n.root.addChild(o),n}(n)}))},onUnload(){this.disposing=!0,t.PlatformManager.dispose(),function(t){let e,n=t[0],r=1;for(;r<t.length;){const o=t[r],i=t[r+1];if(r+=2,("optionalAccess"===o||"optionalCall"===o)&&null==n)return;"access"===o||"optionalAccess"===o?(e=n,n=i(n)):"call"!==o&&"optionalCall"!==o||(n=i(((...t)=>n.call(e,...t))),e=void 0)}}([this,"access",t=>t.app,"optionalAccess",t=>t.destroy,"call",t=>t()])},onTX(t){this.platform.dispatchTouchEvent(t)}});
